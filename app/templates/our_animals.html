<!DOCTYPE html>
<html lang="en">
{% extends "base.html" %}

<head>

    {% block head %}

    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/static/css/animals.css">
    <link rel="stylesheet" type="text/css" href="/static/css/navigation.css">
    <link rel="stylesheet" type="text/css" href="/static/css/dialog.css">
    <script type="text/javascript" src="/static/js/dialog.js"></script>
    <script>

        function show_new() {

            document.getElementById("not-deleted").style.opacity = 1;
            document.getElementById("deleted").style.opacity = 0;
            document.getElementById("deleted").style.visibility = "hidden";
            document.getElementById("not-deleted").style.visibility = "visible";

        }

        function show_old() {

            document.getElementById("not-deleted").style.opacity = 0;
            document.getElementById("deleted").style.opacity = 1;
            document.getElementById("deleted").style.visibility = "visible";
            document.getElementById("not-deleted").style.visibility = "hidden";

        }






    </script>
    <title>Наши животные</title>

    {% endblock %}
</head>

<body>
{% block after %}


<span class="title">Наши животные</span>
{% if user.is_authenticated %}

<a class="add_button" href="{{url_for('add_animal')}}">Добавить животное</a>

{% endif %}
<nav class="category-navigation">
    <ul>
        <li><a onclick="show_new()">Сейчас у нас</a></li>
        <li><a onclick="show_old()">Вернулись домой</a></li>
    </ul>
</nav>

<div id="animals-blocks">
    <div class="animals-list" id="not-deleted">
        {% if animals %}
        {% for animal in animals %}
        <dialog id="confirm-dialog-{{animal.id}}-remove" class="confirm-dialog">

            <p class="dialog-title">Вы действительно хотите удалить это животное?</p>
            <hr>
            <div class="buttons">
                <a onclick="close_confirm_dialog({{animal.id}}, 'remove');">Отмена</a>
                <a href="{{url_for('our_animals', action='remove',  id=animal.id)}}">Да</a>
            </div>
        </dialog>
        <dialog id="confirm-dialog-{{animal.id}}-move" class="confirm-dialog">
            <p class="dialog-title">Вы действительно хотите отправить это животное домой?</p>
            <hr>
            <div class="buttons">
                <a onclick="close_confirm_dialog({{animal.id}}, 'move');">Отмена</a>
                <a href="{{url_for('our_animals', action='move_to_house',  id=animal.id)}}">Да</a>
            </div>
        </dialog>
        <div class="item-block">


            {% if user.is_authenticated %}


            <div class="tools">
                {% if animals.index(animal) == 0 %}

                {% endif %}
                <a onclick="open_confirm_dialog({{animal.id}}, 'move');">
                    <i class="fa-solid fa-house"></i>
                </a>
                <a href="{{url_for('add_animal', action='edit', id=animal.id)}}">
                    <i class="fa-solid fa-pen"></i>
                </a>
                <a onclick="open_confirm_dialog({{animal.id}}, 'remove');">
                    <i class="fa fa-trash-o"></i>
                </a>
            </div>
            {% endif %}
            <div class="content">

                <img class="cover" src="{{ animal.cover }}">

                <div class="animals">
                    <span class="title-block">{{ animal.name }}</span>
                    <div class="animals-body">
                        {{ animal.body|safe }}
                    </div>

                </div>

            </div>
        </div>

        {% endfor %}
        {% else %}
        <div class="is-empty">
            <img src="static/images/empty-box-icon.svg"
                 style="filter: invert(57%) sepia(6%) saturate(16%) hue-rotate(43deg) brightness(87%) contrast(89%);">
            <p>Пока здесь пусто</p>

        </div>
        {% endif %}
    </div>

    <div class="animals-list" id="deleted" style="visibility: hidden; opacity: 0;">
        {% if no_animals %}
        {% for animal in no_animals %}
        <dialog id="confirm-dialog-{{animal.id}}-remove" class="confirm-dialog">

            <p class="dialog-title">Вы действительно хотите удалить это животное?</p>
            <hr>
            <div class="buttons">
                <a onclick="close_confirm_dialog({{animal.id}}, 'remove');">Отмена</a>
                <a href="{{url_for('our_animals', action='remove',  id=animal.id)}}">Да</a>
            </div>
        </dialog>
        <dialog id="confirm-dialog-{{animal.id}}-move" class="confirm-dialog">
            <p class="dialog-title">Вы действительно хотите отправить это животное домой?</p>
            <hr>
            <div class="buttons">
                <a onclick="close_confirm_dialog({{animal.id}}, 'move');">Отмена</a>
                <a href="{{url_for('our_animals', action='move_to_house',  id=animal.id)}}">Да</a>
            </div>
        </dialog>
        <div class="item-block">


            {% if user.is_authenticated %}


            <div class="tools">
                {% if no_animals.index(animal) == 0 %}
                <a href="{{url_for('add_animal')}}">Добавить животное</a>
                {% endif %}
                <a onclick="open_confirm_dialog({{animal.id}}, 'move');">
                    <i class="fa-solid fa-shield-dog"></i>
                </a>
                <a href="{{url_for('add_animal', action='edit', id=animal.id)}}">
                    <i class="fa-solid fa-pen"></i>
                </a>
                <a onclick="open_confirm_dialog({{animal.id}}, 'remove');">
                    <i class="fa fa-trash-o"></i>
                </a>
            </div>
            {% endif %}
            <div class="content">

                <img class=" cover" src="{{ animal.cover }}">

                <div class="animals">
                    <span class="title-block">{{ animal.name }}</span>
                    <div class="animals-body">
                        {{ animal.body|safe }}
                    </div>

                </div>


            </div>
        </div>

        {% endfor %}
        {% else %}
        <div class="is-empty">
            <img src="static/images/empty-box-icon.svg"
                 style="filter: invert(57%) sepia(6%) saturate(16%) hue-rotate(43deg) brightness(87%) contrast(89%);">
            <p>Пока здесь пусто</p>

        </div>
        {% endif %}
    </div>

</div>

{% endblock %}

</body>
</html>